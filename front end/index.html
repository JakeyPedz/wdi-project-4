<!DOCTYPE html>
<html ng-app='Qrowded'>
<head>
  <meta charset="UTF-8">
  <title>Qrowded</title>
  <script src="/bower_components/angular/angular.min.js"></script>
  <script src="/bower_components/angular-ui-router/release/angular-ui-router.min.js"></script>
  <script src="/bower_components/angular-resource/angular-resource.min.js"></script>
  <script src="/bower_components/angular-jwt/dist/angular-jwt.min.js"></script>
  <script src="/bower_components/jquery/dist/jquery.min.js"></script>
  <script src="/bower_components/tether/dist/js/tether.min.js"></script>
  <script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

  <!-- Internal scripts -->
  <script src="js/app.js"></script>
  <script src="js/models/project.js"></script>
  <script src="js/models/user.js"></script>
  <script src="js/services/authInterceptor.js"></script>
  <script src="js/services/tokenService.js"></script>
  <script src="js/controllers/projectsController.js"></script>
  <script src="js/controllers/usersController.js"></script>
  

  <!-- CSS -->
  <link rel="stylesheet" href="/bower_components/tether/dist/css/tether.min.css">
  <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/style.css">
</head>

<!-- Nav Bar -->
<body ng-controller="UsersController as users">
  <nav class="navbar navbar-light bg-faded">
    <div class="container">
      <button class="navbar-toggler hidden-sm-up" type="button" data-toggle="collapse" data-target="#exCollapsingNavbar2">
        &#9776;
      </button>
      <div class="collapse navbar-toggleable-xs" id="exCollapsingNavbar2">
        <a class="navbar-brand" href="#">Qrowded</a>
        <ul class="nav navbar-nav">
          <li class="nav-item" ng-show="users.isLoggedIn()">
            <a class="nav-link" ng-click="users.disappear()" href="#">Logout</a>
          </li>
          <li class="nav-item" ng-hide="users.isLoggedIn()">
            <a class="nav-link" href="#register">Register</a>
          </li>
          <li class="nav-item" ng-hide="users.isLoggedIn()">
            <a class="nav-link" href="#login">Login</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>


  <!-- <main> -->
   <!--  <div class="message">
      {{agents.message}}
    </div>

    <div ng-show="users.isLoggedIn()">
      <h3>Welcome back Agent {{ users.agent.codename }}</h3>
    </div> -->

    <!-- <section ng-show="users.isLoggedIn()">
      <p>Here is the list of our current assets:</p>
      <ul>
        <li ng-repeat="agent in users.all">
          <strong>{{agent.codename}}</strong> - {{agent.realname}} - {{agent.location}}
        </li>
      </ul>
    </section> -->

  <main class="container" ng-show="users.isLoggedIn()">
    <h1>Qrowded Projects</h1>
    <section ng-controller='projectsController as projects' class="row">
      <div class="col-sm-4" ng-repeat="project in projects.all">
        <div class="card card-block">
          <img class="card-img-top" ng-src="{{project.logo}}" alt="Card image cap">
          <div class="card-block">
            <h4 class="card-title">{{project.title}}</h4>
            <p class="card-text">{{project.description | limitTo: 100 }}{{project.description.length > 100 ? '...' : ''}}</p>
            <a href="#" class="btn btn-primary">Button</a>
          </div>
        </div>
      </div>
    </section>
  </main>

<!-- Forms to Log In -->

<h1>Hello: {{ users.sanityCheck }}</h1>
  <section ng-hide="users.isLoggedIn()">
    <h3>Login</h3>
    <form id="login" ng-submit="users.login()">
      <label for="email">Email</label>
      <input type="text" name="email" placeholder="What is your email?" ng-model="users.user.email">

      <label for="password">Password</label>
      <input type="password" name="password" placeholder="What is your password?" ng-model="users.user.password">

      <input type="submit" value="Access">
    </form>
  </section>

  <section ng-hide="users.isLoggedIn()">
    <h3>Register</h3>
    <form id="register" ng-submit="users.register()">
      <label for="email">Email</label>
      <input type="text" name="email" placeholder="Email" ng-model="users.user.email">

      <label for="password">Password</label>
      <input type="password" name="password" placeholder="Password" ng-model="users.user.password">

      <input type="submit" value="Access">
    </form>
  </section>
</body>
</html>